# 변수와 메서드

### 변수의 생성위치에 따른 분류

변수는 클래스변수, 인스턴스변수, 지역변수 세 종류가 있다.

    멤버변수: 멤버로 정의된 변수
        - 클래스변수: 멤버변수 중 static이 붙은 변수
        - 인스턴스변수: 멤버변수 중 static이 붙지 않은 변수
    
    지역변수: 멤버변수를 제외한 모든 변수

```java
class Variables {
    int iv;         // 인스턴스변수
    static int cv;  // 클래스변수

    void method() {
        int lv = 0; // 지역변수
    }
}
```
이때 인스턴스변수와 클래스변수가 선언된 영역을 클래스영역, 지역변수가 선언된 영역을 메서드영역이라 칭한다.

|변수의 종류|선언위치|생성시기|
|:-:|:-:|:-:|
|클래스 변수<br>(class variables)|클래스 영역|클래스가 메모리에 올라갈 때|
|인스턴스 변수<br>(instance variables)|클래스 영역|인스턴스가 생성되었을 때|
|지역 변수<br>(local variable)|클래스 영역 이외의 영역<br>(메서드, 생성자, 초기화 블럭 내부)|변수 선언문이 수행되었을 때|

#### 인스턴스변수(instance variable)

클래스 영역에 선언되며, 클래스의 인스턴스를 생성할 때 만들어진다. 그렇기 때문에 인스턴스 변수의 값을 읽어 오거나 저장하기 위해서는 먼저 인스턴스를 생성해야한다.

인스턴스는 독립적인 저장공간을 가지므로 서로 다른 값을 가질 수 있다. 인스턴스마다 고유한 상태를 유지해야하는 속성의 경우, 인스턴스변수로 선언한다.

#### 클래스변수(class variable)

클래스변수는 인스턴스변수 앞에 static을 붙인다. 인스턴스마다 독립적인 저장공간을 갖는 인스턴스변수와는 달리, 클래스변수는 모든 인스턴스가 공통된 저장공간(변수)을 공유하게 된다. 따라서 한 클래스의 모든 인스턴스들이 공통적인 값을 유지해야하는 속성의 경우, 클래스변수로 선언해야 한다.

클래스변수는 인스턴스변수와 달리 인스턴스를 생성하지 않고도 언제라도 바로 사용할 수 있다는 속성이 있으며, ```클래스이름.클래스변수```와 같은 형식으로 사용한다.

클래스가 메모리에 로딩될 때 생성되어 프로그램이 종료될 때 까지 유지되며, `public`을 앞에 붙이면 같은 프로그램 내에서 어디서나 접근할 수 있는 **전역변수**의 성질을 갖는다.

#### 지역변수

메서드 내에 선언되어 메서드 내에서만 사용 가능하며, 메서드가 종료되면 소멸되어 사용할 수 없게 된다. ```for```문 또는 ```while```문의 블럭 내에 선언된 지역변수는, 지역변수가 선언된 블럭 ```{}```내에서만 사용 가능하며, 블럭을 벗어나면 소멸되어 사용할 수 없게 된다.



## 메서드

메서드는 일련의 특정 작업을 수행하는 일련의 문장들을 하나로 묶은 것이다.

### 메서드를 사용하는 이유

    1. 높은 재사용성
    한번 만들어 놓은 메서드는 몇 번이고 호출할 수 있으며, 다른 프로그램에서도 사용 가능하다.
    
    2. 중복된 코드의 제거
    반복되는 문장을 묶어서 하나의 메서드로 작성해 놓으면, 이를 메서드를 호출하는 한 문장으로 대체할 수 있다.

    3. 프로그램의 구조화
    큰 규모의 프로그램에서 문장들을 작업단위로 여러 개의 메서드에 담아 프로그램의 구조를 단순화시키는 것이 가능하다.

### 메서드의 선언과 구현

메서드는 ```선언부(header)```와 ```구현부(body)```로 이루어져 있다.

```java
반환타입 메서드이름 (타입 변수명, ...) {   // 선언부
    // 메서드 호출시 수행될 코드          // 구현부
}

int add(int a, int b) {
    int result = a + b;
    return result;
}
```
```return``` 뒤에 들어가는 반환값의 타입은 반환타입과 일치하거나 자동 형변환이 가능한 것이어야 한다.

### 클래스 메서드(static 메서드)와 인스턴스 메서드

변수에서 그랬듯이, 메서드 앞에 ```static```이 붙어 있으면 **클래스 메서드**, 없다면 **인스턴스 메서드**이다.

클래스 메서드도 클래스 변수처럼 객체를 생성하지 않고도 ```클래스이름.메서드이름(매개변수)```와 같은 식으로 호출이 가능하다. 반면 인스턴스 메서드는 반드시 객체를 생성해야만 호출할 수 있다.

**인스턴스 메서드는 인스턴스 변수와 관련된 작업을 하는, 즉 메서드의 작업을 수행하는데 인스턴스 변수를 필요로 하는 메서드이다.**

인스턴스 변수는 인스턴스(객체)를 생성해야만 만들어지므로 인스턴스 메서드 역시 인스턴스를 생성해야만 호출할 수 있다.

**인스턴스와 관계없는, 즉 인스턴스 변수나 인스턴스 메서드를 사용하지 않는 메서드를 클래스 메서드(static 메서드)로 정의한다**

인스턴스 변수를 사용하지 않는다고 해서 반드시 클래스 메서드로 정의해야 하는 것은 아니지만 특별한 이유가 없는 한 그렇게 하는 것이 일반적이다.

    1. 클래스를 설계할 때, 멤버변수 중 모든 인스턴스에 공통으로 사용하는 것에 static을 붙인다.
    - 생성된 각 인스턴스는 서로 독립적이기 때문에 각 인스턴스의 변수는 서로 다른 값을 유지한다. 그러나 모든 인스턴스에서 같은 값이 유지되어야 하는 변수는 static을 붙여서 클래스변수로 정의해야 한다.

    2. 클래스 변수(static 변수)는 인스턴스를 생성하지 않아도 사용할 수 있다.
    - static이 붙은 변수(클래스 변수)는 클래스가 메모리에 올라갈 때 이미 자동적으로 생성되기 때문이다.

    3. 클래스 메서드(static 메서드)에서는 인스턴스 변수를 사용할 수 없다.
    - 인스턴스변수는 인스턴스가 반드시 존재해야만 사용할 수 잇는데, 클래스메서드(static이 붙은 메서드)는 인스턴스 생성 없이 호출가능하므로 클래스 메서드가 호출되었을 때 인스턴스가 존재하지 않을 수도 있다. 따라서 클래스 메서드에서의 인스턴스변수 사용은 금지한다.
    - 반면에 인스턴스변수나 인스턴스메서드에서는 static이 붙은 멤버들을 사용하는 것이 언제나 가능하다. 인스턴스변수가 존재한다는 것은 static변수가 이미 메모리에 존재한다는 것을 의미하기 때문이다.

    4. 메서드 내에서 인스턴스 변수를 사용하지 않는다면, static을 붙이는 것을 고려한다.
    - 메서드의 작업내용 중에서 인스턴스변수를 필요로 한다면, static을 붙일 수 없다. 반대로 인스턴스변수를 필요로 하지 않는다면 static을 붙이자. 메서드 호출시간이 짧아지므로 성능이 향상된다. static을 안 붙인 메서드(인스턴스메서드)는 실행 시 호출되어야할 메서드를 찾는 과정이 추가적으로 필요하기 때문에 시간이 더 걸린다.

요약하자면,

**- 클래스의 멤버변수 중 모든 인스턴스에 공통된 값을 유지해야하는 것이 있는지 살펴보고, 있다면 static을 붙여준다.**

**- 작성한 메서드 중에서인스턴스 변수나 인스턴스 메서드를 사용하지 않는 메서드에 static을 붙일 것을 고려한다.**

### 클래스 멤버와 인스턴스 멤버간의 참조와 호출

같은 클래스에 속한 멤버들 간에는 별도의 인스턴스를 생성하지 않고도 서로 참조 또는 호출이 가능하다. 단, 클래스멤버가 인스턴스 멤버를 참조 또는 호출하고자 하는 경우에는 인스턴스를 생성해야 한다.

**인스턴스 멤버가 존재하는 시점에 클래스 멤버는 항상 존재하지만, 클래스멤버가 존재하는 시점에 인스턴스 멤버가 존재하지 않을 수도 있기 때문이다.**

```java
class TestClass {
    void instanceMethod() {}      // 인스턴스 메서드
    static void staticMethod() {} // static 메서드

    void instanceMethod2() {      // 인스턴스 메서드
        instanceMethod();         // 다른 인스턴스 메서드 호출 가능
        staticMethod();           // static 메서드 호출 가능
    }

    static void staticMethod2() { // static 메서드
        instanceMethod();         // **에러** 인스턴스 메서드 호출 불가
        staticMethod();           // static 메서드 호출 가능
    }
}
```

위 코드는 같은 클래스 내의 인스턴스 메서드와 static 메서드 간의 호출에 대해서 설명하고 있다. 같은 클래스 내의 메서드는 서로 객체의 생성이나 참조변수 없이 직접 호출이 가능하지만, **static 메서드는 인스턴스 메서드를 호출할 수 없다.**

```java
class TestClass2 {
    int iv;                       // 클래스 변수
    static int cv;                // 인스턴스 변수

    void instanceMethod() {       // 인스턴스 메서드
        System.out.println(iv);   // 인스턴스 변수 사용 가능
        System.out.println(cv);   // 클래스 변수 사용 가능
    }

    static void staticMethod() {  // static 메서드
        System.out.println(iv);   // **에러** 인스턴스 변수 사용 불가
        System.out.println(cv);   // 클래스 변수는 사용 가능
    }
}
```

    인스턴스멤버(인스턴스변수와 인스턴스메서드)는 반드시 객체를 생성한 후에만 참조 또는 호출이 가능하기 때문에 클래스멤버가 인스턴스멤버를 참조, 호출하기 위해서는 객체를 생성해야만 한다.

    하지만 인스턴스멤버간의 호출에는 아무런 문제가 없다. 하나의 인스턴스멤버가 존재한다는 것은 인스턴스가 이미 생성되어있다는 것을 의미하며, 즉 다른 인스턴스멤버들도 모두 존재하기 때문이다.

실제로는 같은 클래스 내에서 클래스멤버가 인스턴스멤버를 참조 또는 호출해야하는 경우는 드물다. 이런 경우가 발생한다면, 인스턴스메서드로 작성해야할 메서드를 클래스메서드로 한 것은 아닌지 한 번 더 확인해봐야 한다.