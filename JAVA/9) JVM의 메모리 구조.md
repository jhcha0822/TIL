# JVM의 메모리 구조

응용프로그램이 실행되면, JVM은 시스템(OS)으로부터 프로그램을 수행하는데 필요한 메모리를 할당받고 JVM은 이 메모리를 용도에 따라 여러 영역으로 나누어 관리한다.

    1. 메서드 영역(method area)
    - 프로그램 실행 중 어떤 클래스가 사용되면, JVM은 해당 클래스의 클래스파일 (*.class)을 읽어서 분석하여 클래스에 대한 정보(클래스 데이터)를 이곳에 저장한다. 이 때, 그 클래스의 클래스변수(class variable)도 이 영역에 함께 생성된다.

    2. 호출 스택(call stack 또는 execution stack)
    - 호출스택은 메서드의 작업에 필요한 메모리 공간을 제공한다. 메서드가 호출되면, 호출스택에 호출된 메서드를 위한 메모리가 할당되며, 이 메모리는 메서드가 작업을 수행하는 동안 지역변수(매개변수 포함)들과 연산의 중간결과 등을 저장하는데 사용된다. 그리고 메서드가 작업을 마치면 할당되었던 메모리공간은 반환되어 비워진다.

    3. 힙
    - 인스턴스가 생성되는 공간, 프로그램 실행 중 생성되는 인스턴스는 모두 이곳에 생성된다. 즉, 인스턴스변수(instance variable)들이 생성되는 공간이다.

|메서드 영역|호출 스택|힙|
|:-:|:-:|:-:|
|클래스 데이터<br>클래스변수|지역변수<br>매개변수<br>연산의 중간결과|인스턴스변수|

프로그램이 종료될 때, 호출 스택과 달리 힙 영역, 즉 인스턴스들은 `free()`되지 않는다. 이 반환을 수행하기 위해 JVM은 `garbage collection`을 보유하고 있다. 시간이 지나면 알아서 메모리를 반환해주는 기능을 수행한다.

[가비지 콜렉션](https://mangkyu.tistory.com/118) 관련 링크


